<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêo√°n S·ªë May M·∫Øn (1-100)</title>
    
    <style>
        /* --- 3. Y√™u C·∫ßu Giao Di·ªán (UI/UX) & 5. Y√™u c·∫ßu K·ªπ thu·∫≠t (CSS) --- */
        :root {
            --color-primary: #3c9d9b; /* Teal */
            --color-secondary: #ff7f50; /* Coral */
            --color-success: #5cb85c;
            --color-danger: #d9534f;
            --color-background: #f4f7f8;
            --color-text: #333;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* 3. Y√™u C·∫ßu Giao Di·ªán: Header */
        header {
            width: 100%;
            background-color: var(--color-primary);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        header h1 {
            margin: 0;
            font-size: 2.2em;
        }

        /* 3. Y√™u C·∫ßu Giao Di·ªán: N√∫t "Ch∆°i L·∫°i" */
        .again-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--color-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .again-button:hover {
            background-color: #ff6347;
        }
        
        /* 3. Y√™u C·∫ßu Giao Di·ªán: Kh·ªëi "S·ªë B√≠ M·∫≠t" */
        .secret-number {
            background-color: var(--color-text);
            color: white;
            font-size: 4em;
            padding: 20px 30px;
            border-radius: 8px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            margin-top: 100px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            width: 80px;
            text-align: center;
            z-index: 10;
        }

        .main-content {
            display: flex;
            justify-content: space-around;
            width: 90%;
            max-width: 800px;
            margin-top: 150px; /* ƒê·∫©y xu·ªëng kh·ªèi Header v√† Secret Number */
        }
        
        .left-panel, .right-panel {
            width: 45%;
        }

        /* 3. Y√™u C·∫ßu Giao Di·ªán: √î Nh·∫≠p li·ªáu */
        #guess-input {
            width: 100px;
            padding: 15px;
            font-size: 1.5em;
            text-align: center;
            border: 3px solid var(--color-primary);
            border-radius: 5px;
            margin-bottom: 20px;
            display: block;
        }

        .guess-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* 3. Y√™u C·∫ßu Giao Di·ªán: N√∫t "ƒêo√°n" */
        #guess-button {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #guess-button:hover:not(:disabled) {
            background-color: #34807e;
        }
        
        #guess-button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        /* 3. Y√™u C·∫ßu Giao Di·ªán: Khu v·ª±c Th√¥ng b√°o */
        .message-box {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-height: 50px;
            font-size: 1.2em;
            margin-bottom: 20px;
            text-align: center;
        }

        /* 3. Y√™u C·∫ßu Giao Di·ªán: Khu v·ª±c Ch√≠nh (Score) */
        .stats-box {
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            background-color: #fff3cd; /* Light warning color */
            border: 1px solid #ffeeba;
            margin-top: 20px;
        }

        .stats-box p {
            margin: 5px 0;
        }

        /* Hi·ªáu ·ª©ng khi Th·∫Øng */
        body.win {
            background-color: var(--color-success);
        }
        body.win header {
            background-color: #4CAF50;
        }
        body.win .secret-number {
            width: 150px;
            background-color: #fff;
            color: var(--color-success);
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            .main-content {
                flex-direction: column;
                margin-top: 180px;
            }
            .left-panel, .right-panel {
                width: 100%;
                margin-bottom: 30px;
            }
            .again-button {
                position: static;
                margin: 10px auto;
                display: block;
            }
            .secret-number {
                margin-top: 120px;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>ƒêo√°n S·ªë May M·∫Øn (1-100)</h1>
        <p style="font-size: 0.9em; margin-top: 5px;">Th·ª≠ ƒëo√°n s·ªë b√≠ m·∫≠t trong kho·∫£ng t·ª´ 1 ƒë·∫øn 100!</p>
        <button class="again-button" onclick="initGame()">üîÑ Ch∆°i L·∫°i</button>
        <div class="secret-number" id="secret-box">?</div>
    </header>

    <main class="main-content">
        <section class="left-panel">
            <div class="guess-controls">
                <input type="number" id="guess-input" min="1" max="100" placeholder="S·ªë ƒëo√°n">
                <button id="guess-button" onclick="checkGuess()">ƒêo√°n</button>
            </div>
        </section>

        <section class="right-panel">
            <div class="message-box" id="message">
                B·∫Øt ƒë·∫ßu ƒëo√°n b·∫±ng c√°ch nh·∫≠p s·ªë b√™n tr√°i!
            </div>
            <div class="stats-box">
                <p>ƒêi·ªÉm hi·ªán t·∫°i: <span id="score">20</span></p>
                <p>ƒêi·ªÉm cao nh·∫•t: <span id="high-score">0</span></p>
            </div>
        </section>
    </main>

    <script>
        /* --- 4. C√°c T√≠nh NƒÉng B·∫Øt bu·ªôc (Ch·ª©c nƒÉng & Logic Tr√≤ ch∆°i) --- */

        let secretNumber;
        let score;
        let highScore = 0;
        
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('high-score');
        const messageElement = document.getElementById('message');
        const secretBoxElement = document.getElementById('secret-box');
        const guessInput = document.getElementById('guess-input');
        const guessButton = document.getElementById('guess-button');
        const body = document.body;

        // 5. Y√™u c·∫ßu K·ªπ thu·∫≠t (T√πy ch·ªçn n√¢ng cao): Load High Score t·ª´ LocalStorage
        if (localStorage.getItem('guessGameHighScore')) {
            highScore = parseInt(localStorage.getItem('guessGameHighScore'));
            highScoreElement.textContent = highScore;
        }

        // --- 4.A Kh·ªüi t·∫°o Tr√≤ ch∆°i & 4.C Ch·ª©c nƒÉng Ch∆°i L·∫°i ---
        function initGame() {
            // 4.A Ch·ªçn s·ªë ng·∫´u nhi√™n t·ª´ 1 ƒë·∫øn 100
            secretNumber = Math.trunc(Math.random() * 100) + 1;
            
            // 4.A Thi·∫øt l·∫≠p ƒêi·ªÉm
            score = 20;
            scoreElement.textContent = score;

            // 4.C ƒê·∫∑t l·∫°i giao di·ªán
            messageElement.textContent = 'B·∫Øt ƒë·∫ßu ƒëo√°n b·∫±ng c√°ch nh·∫≠p s·ªë b√™n tr√°i!';
            secretBoxElement.textContent = '?';
            secretBoxElement.style.width = '80px';
            guessInput.value = '';
            
            // 4.C K√≠ch ho·∫°t l·∫°i n√∫t & √¥ nh·∫≠p li·ªáu
            guessInput.disabled = false;
            guessButton.disabled = false;
            
            // ƒê·∫∑t l·∫°i m√†u n·ªÅn (n·∫øu tr∆∞·ªõc ƒë√≥ th·∫Øng)
            body.classList.remove('win');
            body.style.backgroundColor = 'var(--color-background)';
            document.querySelector('header').style.backgroundColor = 'var(--color-primary)';
        }

        // --- 4.B Logic Ng∆∞·ªùi d√πng: X·ª≠ l√Ω L∆∞·ª£t ƒëo√°n ---
        function displayMessage(message) {
            messageElement.textContent = message;
        }

        function checkGuess() {
            // 4.B Nh·∫≠p li·ªáu
            const guess = Number(guessInput.value);

            // 4.B Ki·ªÉm tra H·ª£p l·ªá
            if (!guess || guess < 1 || guess > 100) {
                displayMessage('‚õî Vui l√≤ng nh·∫≠p s·ªë h·ª£p l·ªá t·ª´ 1 ƒë·∫øn 100!');
                return;
            }

            // 4.B X·ª≠ l√Ω L∆∞·ª£t ƒëo√°n
            // 1. ƒêo√°n ƒë√∫ng
            if (guess === secretNumber) {
                displayMessage('üéâ Tuy·ªát v·ªùi! B·∫°n ƒë√£ ƒëo√°n ƒë√∫ng!');
                
                // Hi·ªÉn th·ªã SecretNumber
                secretBoxElement.textContent = secretNumber;
                secretBoxElement.style.width = '150px';
                
                // ƒê·ªïi m√†u n·ªÅn (Visual effect)
                body.classList.add('win');
                body.style.backgroundColor = 'var(--color-success)';
                document.querySelector('header').style.backgroundColor = '#4CAF50';
                
                // V√¥ hi·ªáu h√≥a controls
                guessInput.disabled = true;
                guessButton.disabled = true;

                // C·∫≠p nh·∫≠t High Score
                if (score > highScore) {
                    highScore = score;
                    highScoreElement.textContent = highScore;
                    localStorage.setItem('guessGameHighScore', highScore); // L∆∞u v√†o LocalStorage
                }
            
            // 2. ƒêo√°n sai (Ch·ªâ x·ª≠ l√Ω khi ƒëi·ªÉm > 1)
            } else if (score > 1) {
                
                // C·∫≠p nh·∫≠t ƒêi·ªÉm hi·ªán t·∫°i
                score--;
                scoreElement.textContent = score;

                // Cung c·∫•p g·ª£i √Ω
                if (guess > secretNumber) {
                    displayMessage('üìà Qu√° cao!');
                } else {
                    displayMessage('üìâ Qu√° th·∫•p!');
                }

            // 3. H·∫øt ƒëi·ªÉm/Thua cu·ªôc
            } else {
                score = 0;
                scoreElement.textContent = score;
                displayMessage('üò≠ B·∫°n ƒë√£ thua cu·ªôc! Game Over!');
                
                // Hi·ªÉn th·ªã SecretNumber
                secretBoxElement.textContent = secretNumber;

                // V√¥ hi·ªáu h√≥a controls
                guessInput.disabled = true;
                guessButton.disabled = true;
            }
        }
        
        // Kh·ªüi ƒë·ªông tr√≤ ch∆°i khi trang ƒë∆∞·ª£c t·∫£i
        window.onload = initGame;
        
        // Cho ph√©p nh·∫•n Enter ƒë·ªÉ ƒëo√°n
        guessInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && !guessButton.disabled) {
                checkGuess();
            }
        });

    </script>
</body>
</html>
